<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glider AI</title>
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        .container {
            text-align: center;
            color: white;
        }
        h1 {
            font-size: 4rem;
            margin: 0;
            animation: fadeIn 1s ease-in;
        }
        p {
            font-size: 1.5rem;
            margin-top: 1rem;
            opacity: 0.9;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #loginButton {
            margin-top: 2rem;
            animation: fadeIn 1.5s ease-in;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Glider AI</h1>
        <p>AI-powered email portal with Gmail integration</p>
        <div id="loginButton"></div>
    </div>

    <script>
        // REPLACE THIS with your actual Google Client ID
        const CLIENT_ID = 'YOUR_GOOGLE_CLIENT_ID';
        const SCOPES = 'https://www.googleapis.com/auth/gmail.readonly https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email';

        let tokenClient;

        function handleAuthClick() {
            tokenClient.requestAccessToken();
        }

        function handleTokenResponse(response) {
            if (response.error) {
                console.error('Auth error:', response);
                return;
            }

            // Store access token and user info
            localStorage.setItem('access_token', response.access_token);

            // Get user info and redirect
            fetch('https://www.googleapis.com/oauth2/v2/userinfo', {
                headers: { Authorization: `Bearer ${response.access_token}` }
            })
            .then(r => r.json())
            .then(userInfo => {
                localStorage.setItem('user_email', userInfo.email);
                localStorage.setItem('user_name', userInfo.name);
                window.location.href = '/portal.html';
            });
        }

        window.onload = function() {
            // Initialize the token client
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: CLIENT_ID,
                scope: SCOPES,
                callback: handleTokenResponse,
            });

            // Create custom styled button
            const loginBtn = document.getElementById('loginButton');
            loginBtn.innerHTML = '<button onclick="handleAuthClick()" style="padding: 15px 40px; background: white; color: #667eea; border: none; border-radius: 50px; font-weight: 600; font-size: 1.1rem; cursor: pointer; transition: all 0.2s;">Login with Google</button>';
        };
    </script>
</body>
</html>
